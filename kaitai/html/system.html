
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <title>System format specification</title>
  </head>
  <body>
           <div class="container">
  <h1>System format specification</h1>

      
<a name='type-system'></a>
<h1>Type: System</h1>

<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
</table>
<a name='type-system-msg_heartbeat'></a>
<h2>Type: MsgHeartbeat</h2>

<p>The heartbeat message is sent periodically to inform the host or other
attached devices that the system is running. It is used to monitor
system malfunctions. It also contains status flags that indicate to the
host the status of the system and whether it is operating correctly.
Currently, the expected heartbeat interval is 1 sec.

The system error flag is used to indicate that an error has occurred in
the system. To determine the source of the error, the remaining error
flags should be inspected.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>flags</td>
<td>u4le</td>
<td>Status flags
</td>
</tr>
</table>
<a name='type-system-msg_status_journal'></a>
<h2>Type: MsgStatusJournal</h2>

<p>The status journal message contains past status reports (see
MSG_STATUS_REPORT) and functions as a error/event storage for telemetry
purposes.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>reporting_system</td>
<td>u2le</td>
<td>Identity of reporting system
</td>
</tr>
<tr>
<td>2</td>
<td>...</td>
<td>sbp_version</td>
<td>u2le</td>
<td>SBP protocol version
</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>total_status_reports</td>
<td>u4le</td>
<td>Total number of status reports sent since system startup
</td>
</tr>
<tr>
<td>8</td>
<td>...</td>
<td>sequence_descriptor</td>
<td>u1</td>
<td>Index and number of messages in this sequence. First nibble is the
size of the sequence (n), second nibble is the zero-indexed counter
(ith packet of n)
</td>
</tr>
<tr>
<td>9</td>
<td>...</td>
<td>journal</td>
<td><a href="#type-system-status_journal_item">StatusJournalItem</a></td>
<td>Status journal
</td>
</tr>
</table>
<a name='type-system-msg_ins_status'></a>
<h2>Type: MsgInsStatus</h2>

<p>The INS status message describes the state of the operation and
initialization of the inertial navigation system.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>flags</td>
<td>u4le</td>
<td>Status flags
</td>
</tr>
</table>
<a name='type-system-msg_gnss_time_offset'></a>
<h2>Type: MsgGnssTimeOffset</h2>

<p>The GNSS time offset message contains the information that is needed to
translate messages tagged with a local timestamp (e.g. IMU or wheeltick
messages) to GNSS time for the sender producing this message.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>weeks</td>
<td>s2le</td>
<td>Weeks portion of the time offset
</td>
</tr>
<tr>
<td>2</td>
<td>...</td>
<td>milliseconds</td>
<td>s4le</td>
<td>Milliseconds portion of the time offset
</td>
</tr>
<tr>
<td>6</td>
<td>...</td>
<td>microseconds</td>
<td>s2le</td>
<td>Microseconds portion of the time offset
</td>
</tr>
<tr>
<td>8</td>
<td>...</td>
<td>flags</td>
<td>u1</td>
<td>Status flags (reserved)
</td>
</tr>
</table>
<a name='type-system-msg_csac_telemetry'></a>
<h2>Type: MsgCsacTelemetry</h2>

<p>The CSAC telemetry message has an implementation defined telemetry
string from a device. It is not produced or available on general Swift
Products. It is intended to be a low rate message for status purposes.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>id</td>
<td>u1</td>
<td>Index representing the type of telemetry in use.  It is
implementation defined.
</td>
</tr>
<tr>
<td>1</td>
<td>...</td>
<td>telemetry</td>
<td>str(ascii)</td>
<td>Comma separated list of values as defined by the index
</td>
</tr>
</table>
<a name='type-system-msg_pps_time'></a>
<h2>Type: MsgPpsTime</h2>

<p>The PPS time message contains the value of the sender's local time in
microseconds at the moment a pulse is detected on the PPS input. This is
to be used for syncronisation of sensor data sampled with a local
timestamp (e.g. IMU or wheeltick messages) where GNSS time is unknown to
the sender.

The local time used to timestamp the PPS pulse must be generated by the
same clock which is used to timestamp the IMU/wheel sensor data and
should follow the same roll-over rules.  A separate MSG_PPS_TIME message
should be sent for each source of sensor data which uses PPS-relative
timestamping.  The sender ID for each of these MSG_PPS_TIME messages
should match the sender ID of the respective sensor data.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>time</td>
<td>u8le</td>
<td>Local time in microseconds
</td>
</tr>
<tr>
<td>8</td>
<td>...</td>
<td>flags</td>
<td>u1</td>
<td>Status flags
</td>
</tr>
</table>
<a name='type-system-msg_ins_updates'></a>
<h2>Type: MsgInsUpdates</h2>

<p>The INS update status message contains information about executed and
rejected INS updates. This message is expected to be extended in the
future as new types of measurements are being added.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>tow</td>
<td>u4le</td>
<td>GPS Time of Week
</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>gnsspos</td>
<td>u1</td>
<td>GNSS position update status flags
</td>
</tr>
<tr>
<td>5</td>
<td>...</td>
<td>gnssvel</td>
<td>u1</td>
<td>GNSS velocity update status flags
</td>
</tr>
<tr>
<td>6</td>
<td>...</td>
<td>wheelticks</td>
<td>u1</td>
<td>Wheelticks update status flags
</td>
</tr>
<tr>
<td>7</td>
<td>...</td>
<td>speed</td>
<td>u1</td>
<td>Wheelticks update status flags
</td>
</tr>
<tr>
<td>8</td>
<td>...</td>
<td>nhc</td>
<td>u1</td>
<td>NHC update status flags
</td>
</tr>
<tr>
<td>9</td>
<td>...</td>
<td>zerovel</td>
<td>u1</td>
<td>Zero velocity update status flags
</td>
</tr>
</table>
<a name='type-system-msg_dgnss_status'></a>
<h2>Type: MsgDgnssStatus</h2>

<p>This message provides information about the receipt of Differential
corrections.  It is expected to be sent with each receipt of a complete
corrections packet.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>flags</td>
<td>u1</td>
<td>Status flags
</td>
</tr>
<tr>
<td>1</td>
<td>...</td>
<td>latency</td>
<td>u2le</td>
<td>Latency of observation receipt
</td>
</tr>
<tr>
<td>3</td>
<td>...</td>
<td>num_signals</td>
<td>u1</td>
<td>Number of signals from base station
</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>source</td>
<td>str(ascii)</td>
<td>Corrections source string
</td>
</tr>
</table>
<a name='type-system-msg_csac_telemetry_labels'></a>
<h2>Type: MsgCsacTelemetryLabels</h2>

<p>The CSAC telemetry message provides labels for each member of the string
produced by MSG_CSAC_TELEMETRY. It should be provided by a device at a
lower rate than the MSG_CSAC_TELEMETRY.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>id</td>
<td>u1</td>
<td>Index representing the type of telemetry in use.  It is
implementation defined.
</td>
</tr>
<tr>
<td>1</td>
<td>...</td>
<td>telemetry_labels</td>
<td>str(ascii)</td>
<td>Comma separated list of telemetry field values
</td>
</tr>
</table>
<a name='type-system-msg_startup'></a>
<h2>Type: MsgStartup</h2>

<p>The system start-up message is sent once on system start-up. It notifies
the host or other attached devices that the system has started and is
now ready to respond to commands or configuration requests.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>cause</td>
<td>u1</td>
<td>Cause of startup
</td>
</tr>
<tr>
<td>1</td>
<td>...</td>
<td>startup_type</td>
<td>u1</td>
<td>Startup type
</td>
</tr>
<tr>
<td>2</td>
<td>...</td>
<td>reserved</td>
<td>u2le</td>
<td>Reserved
</td>
</tr>
</table>
<a name='type-system-msg_group_meta'></a>
<h2>Type: MsgGroupMeta</h2>

<p>This leading message lists the time metadata of the Solution Group. It
also lists the atomic contents (i.e. types of messages included) of the
Solution Group.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>group_id</td>
<td>u1</td>
<td>Id of the Msgs Group, 0 is Unknown, 1 is Bestpos, 2 is Gnss
</td>
</tr>
<tr>
<td>1</td>
<td>...</td>
<td>flags</td>
<td>u1</td>
<td>Status flags (reserved)
</td>
</tr>
<tr>
<td>2</td>
<td>...</td>
<td>n_group_msgs</td>
<td>u1</td>
<td>Size of list group_msgs
</td>
</tr>
<tr>
<td>3</td>
<td>...</td>
<td>group_msgs</td>
<td>u2le</td>
<td>An in-order list of message types included in the Solution Group,
including GROUP_META itself
</td>
</tr>
</table>
<a name='type-system-msg_sensor_aid_event'></a>
<h2>Type: MsgSensorAidEvent</h2>

<p>This diagnostic message contains state and update status information for
all sensors that are being used by the fusion engine. This message will
be generated asynchronously to the solution messages and will be emitted
anytime a sensor update is being processed.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>time</td>
<td>u4le</td>
<td>Update timestamp in milliseconds.
</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>sensor_type</td>
<td>u1</td>
<td>Sensor type
</td>
</tr>
<tr>
<td>5</td>
<td>...</td>
<td>sensor_id</td>
<td>u2le</td>
<td>Sensor identifier
</td>
</tr>
<tr>
<td>7</td>
<td>...</td>
<td>sensor_state</td>
<td>u1</td>
<td>Reserved for future use
</td>
</tr>
<tr>
<td>8</td>
<td>...</td>
<td>n_available_meas</td>
<td>u1</td>
<td>Number of available measurements in this epoch
</td>
</tr>
<tr>
<td>9</td>
<td>...</td>
<td>n_attempted_meas</td>
<td>u1</td>
<td>Number of attempted measurements in this epoch
</td>
</tr>
<tr>
<td>10</td>
<td>...</td>
<td>n_accepted_meas</td>
<td>u1</td>
<td>Number of accepted measurements in this epoch
</td>
</tr>
<tr>
<td>11</td>
<td>...</td>
<td>flags</td>
<td>u4le</td>
<td>Reserved for future use
</td>
</tr>
</table>
<a name='type-system-sub_system_report'></a>
<h2>Type: SubSystemReport</h2>

<p>Report the general and specific state of a subsystem.  If the generic
state is reported as initializing, the specific state should be ignored.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>component</td>
<td>u2le</td>
<td>Identity of reporting subsystem
</td>
</tr>
<tr>
<td>2</td>
<td>...</td>
<td>generic</td>
<td>u1</td>
<td>Generic form status report
</td>
</tr>
<tr>
<td>3</td>
<td>...</td>
<td>specific</td>
<td>u1</td>
<td>Subsystem specific status code
</td>
</tr>
</table>
<a name='type-system-msg_status_report'></a>
<h2>Type: MsgStatusReport</h2>

<p>The status report is sent periodically to inform the host or other
attached devices that the system is running. It is used to monitor
system malfunctions. It contains status reports that indicate to the
host the status of each subsystem and whether it is operating correctly.

Interpretation of the subsystem specific status code is product
dependent, but if the generic status code is initializing, it should be
ignored.  Refer to product documentation for details.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>reporting_system</td>
<td>u2le</td>
<td>Identity of reporting system
</td>
</tr>
<tr>
<td>2</td>
<td>...</td>
<td>sbp_version</td>
<td>u2le</td>
<td>SBP protocol version
</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>sequence</td>
<td>u4le</td>
<td>Increments on each status report sent
</td>
</tr>
<tr>
<td>8</td>
<td>...</td>
<td>uptime</td>
<td>u4le</td>
<td>Number of seconds since system start-up
</td>
</tr>
<tr>
<td>12</td>
<td>...</td>
<td>status</td>
<td><a href="#type-system-sub_system_report">SubSystemReport</a></td>
<td>Reported status of individual subsystems
</td>
</tr>
</table>
<a name='type-system-status_journal_item'></a>
<h2>Type: StatusJournalItem</h2>

<p>Reports the uptime and the state of a subsystem via generic and specific
status codes.  If the generic state is reported as initializing, the
specific state should be ignored.
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>uptime</td>
<td>u4le</td>
<td>Milliseconds since system startup
</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>report</td>
<td><a href="#type-system-sub_system_report">SubSystemReport</a></td>
<td></td>
</tr>
</table>

  </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
  </body>
</html>
      
